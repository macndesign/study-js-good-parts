<!DOCTYPE html>
<html>
<head>
    <title>Javascript: Good Parts - Study 1</title>
    <script type="text/javascript">
    
    // Objetos
    
    var empty_object = {};
    
    var stooge = {
        "first-name": "Jerome",
        "last-name": "Howard"
    };
    
    var flight = {
        airline: "Oceanic",
        number: 815,
        departure: {
            IATA: "SYD",
            time: "2004-09-22 14:55",
            city: "Sydney"
        },
        arrival: {
            IATA: "LAX",
            time: "2004-09-23 10:42",
            city: "Los Angeles"
        }
    };
    
    
    
    // Recuperação
    
    console.log( stooge["first-name"] ); // Jerome
    console.log( flight.departure.IATA ); // SYD
    // undefined
    console.log( stooge["middle-name"] ); // undefined
    console.log( flight.status ); // undefined
    console.log( stooge["FIRST-NAME"] ); // undefined
    // ussando o || para retornar valor padrão
    var middle = stooge["middle-name"] || "(none)";
    console.log( middle ); // none
    var status = flight.status || "undefined";
    console.log( status );
    // Prevenindo TypeError com &&
    console.log( flight.equipment ); // undefined
    // console.log( flight.equipment.model ); // lança o TypeError
    console.log( flight.equipment && flight.equipment.model ); // undefined
    
    
    
    // Atualização
    
    stooge["first-name"] = "Jerome";
    console.log( stooge["first-name"] );
    // Acrescentando propriedade
    stooge["middle-name"] = "Lester";
    console.log( stooge["middle-name"] ); // Lester
    stooge.nickname = "Curly";
    console.log( stooge.nickname ); // Curly
    flight.equipment = {
        model: "Boeing 777"
    };
    console.log( flight.equipment.model ); // Boeing 777
    flight.status = "overdue";
    console.log( flight.status ); // overdue
    
    
    
    // Referência
    
    var x = stooge;
    console.log( x );
    
    x.nickname = 'Curly';
    console.log( x.nickname );
    
    var nick = stooge.nickname;
    // nick é Curly porque x e stooge são referência ao mesmo objeto
    console.log( nick );
    
    a = {}, b = {}, c = {};
    // a, b e c referem-se cada cada um a um objeto vazio diferente
    console.log( a + " " + b + " " + c );
    
    a = b = c = {};
    // a, b e c todos referem-se ao mesmo objeto vazio
    console.log( a + " " + b + " " + c );
    
    
    
    // Protótipos
    
    // Procedimento para facilitar a prototipação
    if (typeof Object.beget !== 'function') {
        Object.beget = function (o) {
            var F = function () {};
            F.prototype = o;
            return new F();
        };
    }
    
    var another_stooge = Object.beget(stooge);
    // Herança prototípica do objeto stooge
    
    another_stooge['first-name'] = 'Harry';
    // atributo first-name do novo objeto
    console.log( another_stooge['first-name'] );
    
    another_stooge['middle-name'] = 'Moses';
    // atributo middle-name do novo objeto
    console.log( another_stooge['middle-name'] );
    
    another_stooge.nickname = 'Moe';
    // atributo nickname do novo objeto
    console.log( another_stooge.nickname );
    
    stooge.profession = 'ator';
    // setando o atributo ator no objeto stooge
    console.log( stooge.profession );
    
    another_stooge.profession;
    // como não tem nada atribuido ele pega por
    // padrão o mesmo valor do objeto pai
    console.log( another_stooge.profession );
    
    </script>
</head>
<body>
<h1>Javascript: Good Parts - Study 1</h1>
</body>
</html>